language: objective-c
install:
  - bundle install
script:
  - ./Scripts/build.swift $PLATFORMS xcode
matrix:
  include:
  - osx_image: xcode11.3
    env: PLATFORMS="iOS_10,tvOS_10,watchOS_3";
    after_success:
        - bash <(curl -s https://codecov.io/bash) -J '^Valet$' -D .build/derivedData/iOS_10 -t 5165deef-da9c-443d-90ea-bb0620bffe44
        - bash <(curl -s https://codecov.io/bash) -J '^Valet$' -D .build/derivedData/tvOS_10 -t 5165deef-da9c-443d-90ea-bb0620bffe44
  - osx_image: xcode11.3
    env: PLATFORMS="iOS_11,tvOS_11,watchOS_4";
    after_success:
        - bash <(curl -s https://codecov.io/bash) -J '^Valet$' -D .build/derivedData/iOS_11 -t 5165deef-da9c-443d-90ea-bb0620bffe44
        - bash <(curl -s https://codecov.io/bash) -J '^Valet$' -D .build/derivedData/tvOS_11 -t 5165deef-da9c-443d-90ea-bb0620bffe44

branches:
  only:
  - master
